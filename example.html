<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Raster JS Demo</title>

 		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>

		<!-- Load proj4js then the dataset -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.5.0/proj4.js"></script>
		<script src="./kampala.js"></script>

		<style>
			#map {
				width: 800px;
				height: 500px;
			}
		</style>
	</head>
	<body onload="initMap();">
		<div id='map'></div>

		<script>

      // global variable for map
      let map;

      /**
       * Initialise the map
       */
      function initMap() {

        // init the map
        map = L.map('map').fitBounds(kampala.getGeoBounds2());

        // add some tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map);

				// test properties
				console.log(kampala.bands);
				console.log(kampala.bl);
				console.log(kampala.tl);
				console.log(kampala.br);
				console.log(kampala.tr);
				console.log(kampala.bounds);
				console.log(kampala.resolution);
				console.log(kampala.width);
				console.log(kampala.height);
				console.log(kampala.proj);
				console.log(kampala.transformer);
				console.log("---");

				//test bands
				console.log(kampala.band1.length, kampala.band1[0].length);
				console.log(kampala.band2.length, kampala.band2[0].length);
				console.log(kampala.band3.length, kampala.band3[0].length);
				console.log(kampala.band4.length, kampala.band4[0].length);
				console.log("---");

				// test transforms
				TEST_transforms([parseInt(kampala.width/2), parseInt(kampala.height/2)]);
			}

			/**
			 * Quick test to demonstrate that the coord conversions & transformations work
			 */
			function TEST_transforms(tmp0) {
				console.log(tmp0);
				var tmp = kampala.image2proj(tmp0)
				console.log(tmp);
				var tmp2 = kampala.proj2geo(tmp);
				console.log(tmp2);
				var tmp3 = kampala.geo2proj(tmp2);
				console.log(tmp3);
				console.log(kampala.proj2image(tmp3));
			}
		</script>
	</body>
</html>
